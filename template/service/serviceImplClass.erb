/*
 * Copyright (C) 2015  
 *
 * 本系统是商用软件,未经授权擅自复制或传播本程序的部分或全部将是非法的.
 *
 * @since 2015-6-18
 * @author Joe
 * @version 1.0.0
 */
package cn.<%=@@projectName%>.service.impl;

import java.util.Date;
import java.util.List;
import org.apache.log4j.Logger;
import org.hibernate.criterion.DetachedCriteria;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.DataAccessException;
import cn.<%=@@projectName%>.exception.BusinessException;
import cn.<%=@@projectName%>.framework.PageFetch;
import cn.<%=@@projectName%>.model.<%=@@bean.table_name%>;
import cn.<%=@@projectName%>.dao.<%=@@bean.table_name%>Dao;
import cn.<%=@@projectName%>.service.<%=@@bean.table_name%>Service;

/**
 * 
 * @description <%=@@bean.table_name%> 的ServiceImpl方法
 * 
 */
public class <%=@@bean.table_name%>ServiceImpl implements <%=@@bean.table_name%>Service {

    private Logger logger = Logger.getLogger(<%=@@bean.table_name%>ServiceImpl.class);

    @Autowired
    private <%=@@bean.table_name%>Dao <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao;

    /**
     * 新增<%=@@bean.table_name%>
     *
     * @param <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>
     * @return void
     * @throws BusinessException
     */
    @Override
    public void add<%=@@bean.table_name%>(<%=@@bean.table_name%> <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>) throws BusinessException {
        try {
            <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao.add<%=@@bean.table_name%>(<%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>);
        } catch (DataAccessException dae) {
            logger.error("======" + new Date() + ": [error] add<%=@@bean.table_name%> " + dae);
            throw new BusinessException("error.data.access");
        }
    }

    /**
     * 删除<%=@@bean.table_name%>
     * 
     * @param <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Id
     * @return void
     * @throws BusinessException
     */
    @Override
    public void delete<%=@@bean.table_name%>(<%=@@bean.table_name%> <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>) throws BusinessException {
        try {
            <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao.delete<%=@@bean.table_name%>(<%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>);
        } catch (DataAccessException dae) {
            logger.error("======" + new Date() + ": [error] delete<%=@@bean.table_name%> " + dae);
            throw new BusinessException("error.data.access");
        }
    }

    /**
     * 更新<%=@@bean.table_name%>
     * 
     * @param <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>
     * @return void
     * @throws BusinessException
     */
    @Override
    public void update<%=@@bean.table_name%>(<%=@@bean.table_name%> <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>) throws BusinessException {
        try {
            <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao.update<%=@@bean.table_name%>(<%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>);
        } catch (DataAccessException dae) {
            logger.error("======" + new Date() + ": [error] update<%=@@bean.table_name%> " + dae);
            throw new BusinessException("error.data.access");
        }
    }

    /**
     * 通过Id查找<%=@@bean.table_name%>
     * 
     * @param <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Id
     * @return <%=@@bean.table_name%>
     * @throws BusinessException
     */
    @Override
    public <%=@@bean.table_name%> find<%=@@bean.table_name%>ById(Long <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Id) throws BusinessException {

        <%=@@bean.table_name%> <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>;
        try {
            <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%> = <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao.find<%=@@bean.table_name%>ById(<%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Id);
        } catch (DataAccessException dae) {
            logger.error("======" + new Date() + ": [error] find<%=@@bean.table_name%>ById " + dae);
            throw new BusinessException("error.data.access");
        }

        return <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>;
    }

    /**
     * 查询<%=@@bean.table_name%>
     * 
     * @param dc
     * @param pf
     * @return PageFetch<<%=@@bean.table_name%>>
     * @throws BusinessException
     */
    @Override
    public PageFetch<<%=@@bean.table_name%>> search<%=@@bean.table_name%>(DetachedCriteria dc,
            PageFetch<?> pf) throws BusinessException {
        try {
            return <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao.search<%=@@bean.table_name%>(dc, pf);
        } catch (DataAccessException dae) {
            logger.error("======" + new Date() + ": [error] search<%=@@bean.table_name%> " + dae);
            throw new BusinessException("error.data.access");
        }
    }

    /**
     * 获取全部<%=@@bean.table_name%>列表
     * 
     * @param dc
     * @return List<<%=@@bean.table_name%>>
     * @throws BusinessException
     */
    @Override
    public List<<%=@@bean.table_name%>> get<%=@@bean.table_name%>List(DetachedCriteria dc) throws BusinessException {
        try {
            return <%=@@bean.table_name[0].downcase<<@@bean.table_name[1,@@bean.table_name.length]%>Dao.get<%=@@bean.table_name%>List(dc);
        } catch (DataAccessException dae) {
            logger.error("======" + new Date() + ": [error] get<%=@@bean.table_name%>List " + dae);
            throw new BusinessException("error.data.access");
        }
    }

}
